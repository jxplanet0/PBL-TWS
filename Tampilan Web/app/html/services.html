<!DOCTYPE html>
<html>
<head>
    <title>Laptop Recommendation</title>
    <link rel="icon" href="tosiba.png" type="image/png">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/Tampilan Web/app/js/app.js" />
    <script>

    $(document).ready(function() {
        function loadPage(page = 1) {
            $.ajax({
                type: "GET",
                url: "http://localhost/TWS/data-2.php",
                data: $('#search-form').serialize() + '&page=' + page,
                success: function(data) {
                    $('#searchResults').html(data);
                }
            });
        }

        $('#search-form').on('submit', function(event) {
            event.preventDefault();
            loadPage();
        });

        $(document).on('click', '.pagination a', function(event) {
            event.preventDefault();
            const page = $(this).data('page');
            loadPage(page);
        });

        // Handle major selection change
        $('#nama_jurusan').on('change', function() {
            const selectedMajor = $(this).val();
            if (selectedMajor) {
                $.ajax({
                    type: "POST",
                    url: "/recommend",
                    contentType: "application/json",
                    data: JSON.stringify({ nama_jurusan: selectedMajor }),
                    success: function(data) {
                        let resultsHtml = '';
                        if (data.error) {
                            resultsHtml = `<p>${data.error}</p>`;
                        } else {
                            data.forEach(function(laptop) {
                                resultsHtml += `
                                    <div class="col-md-4 mb-3">
                                        <div class="card">
                                            <div class="card-body">
                                                <h5 class="card-title">${laptop.processor_name}</h5>
                                                <p class="card-text">RAM: ${laptop.ram} GB</p>
                                                <p class="card-text">Storage: ${laptop.storage_capacity} GB</p>
                                                <p class="card-text">Storage Type: ${laptop.storage_type}</p>
                                                <p class="card-text">Screen: ${laptop.screen}</p>
                                                <p class="card-text">Graphic: ${laptop.graphic}</p>
                                            </div>
                                        </div>
                                    </div>`;
                            });
                        }
                        $('#searchResults').html(resultsHtml);
                    }
                });
            } else {
                $('#searchResults').html('');
            }
        });
    });

    </script>
    <link
        rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
        crossorigin="anonymous"
    />
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet"
    />
    <link rel="stylesheet" href="/Tampilan Web/app/css/style.css" />
</head>
<body>
    <header class="navbar navbar-expand-lg navbar-white bg-white">
        <div class="container-fluid">
            <a class="navbar-brand" href="/Tampilan Web/app/html/index.html">
                <img src="/Tampilan Web/image/tosiba.png" alt="Tosiba Logo" class="logo" style="width: 150px; height: auto;" />
            </a>
            <nav class="navbar navbar-expand-lg navbar-white bg-white">
                <button
                    class="navbar-toggler"
                    type="button"
                    data-toggle="collapse"
                    data-target="#navbarNav"
                    aria-controls="navbarNav"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
                >
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="/Tampilan Web/app/html/index.html">Home</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="/Tampilan Web/app/html/services.html">Services</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/Tampilan Web/app/html/aboutus.html">About Us</a>
                        </li>
                    </ul>
                </div>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item username">
                        <a class="nav-link" href="/Tampilan Web/app/html/profile.html">Jane Smith</a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>
    <div class="search-container">
        <h1>Filter Laptops</h1>
        <form id="search-form" class="mr-5 ml-5">
            <label for="laptop_name">Laptop Name:</label>
            <input type="text" name="laptop_name" id="laptop_name" class="form-control mb-3" placeholder="Search Laptop Name">
            <label for="major">Major:</label>
            <select name="nama_jurusan" id="nama_jurusan" class="form-control mb-3">
                <option value="">Select Your Major</option>
                <option value="Teknik dan Teknik Informatika">Engineering and Information Technology</option>
                <option value="Arsitektur">Architecture</option>
                <option value="Desain">Design</option>
                <option value="Ilmu Komunikasi dan Multimedia">Communication Sciences and Multimedia</option>
                <option value="Akuntansi dan Ilmu Ekonomi">Accountant and Economy</option>
                <option value="Teknik Elektro">Electrical Engineering</option>
                <option value="Teknik Sipil">Civil Engineering</option>
                <option value="Bidang Lainnya">Other Major</option>
            </select>
            <button class="btn btn-primary mb-3" type="button" data-toggle="collapse" data-target="#filterCollapse" aria-expanded="false" aria-controls="filterCollapse">
                Filter
            </button>
            <div class="collapse" id="filterCollapse">
                <select name="processor_name" id="processor_name">
                    <option value="">Select Processor</option>
                    <option value="Core i3">Core i3</option>
                    <option value="Core i5">Core i5</option>
                    <option value="Core i7">Core i7</option>
                    <option value="Core i9">Core i9</option>
                    <option value="Hexa Core i5">Hexa Core i5</option>
                    <option value="Octa Core i7">Octa Core i7</option>
                    <option value="Dual Core">Dual Core</option>
                    <option value="Ryzen 3 Dual Core">Ryzen 3 Dual Core</option>
                    <option value="Ryzen 5 Dual Core">Ryzen 5 Dual Core</option>
                    <option value="Ryzen 7 Dual Core">Ryzen 7 Dual Core</option>
                    <option value="Ryzen 3 Quad Core">Ryzen 3 Quad Core</option>
                    <option value="Ryzen 5 Quad Core">Ryzen 5 Quad Core</option>
                    <option value="Ryzen 7 Quad Core">Ryzen 7 Quad Core</option>
                    <option value="Ryzen 3 Hexa Core">Ryzen 3 Hexa Core</option>
                    <option value="Ryzen 5 Hexa Core">Ryzen 5 Hexa Core</option>
                    <option value="Ryzen 7 Hexa Core">Ryzen 7 Hexa Core</option>
                    <option value="Ryzen 5 Octa Core">Ryzen 5 Octa Core</option>
                    <option value="Ryzen 7 Octa Core">Ryzen 7 Octa Core</option>
                    <option value="Ryzen 9 Octa Core">Ryzen 9 Octa Core</option>
                    <option value="M1">M1</option>
                    <option value="M1 Pro">M1 Pro</option>
                    <option value="Celeron Dual Core">Celeron Dual Core</option>
                    <option value="Celeron Quad Core">Celeron Quad Core</option>
                    <option value="Pentium Silver">Pentium Silver</option>
                    <option value="Pentium Quad Core">Pentium Quad Core</option>
                    <option value="APU Dual Core A6">APU Dual Core A6</option>
                    <option value="APU Dual Core A9">APU Dual Core A9</option>
                    <option value="Athlon Dual Core">Athlon Dual Core</option>
                    <option value="Snapdragon 7c Gen 2">Snapdragon 7c Gen 2</option>
                    <option value="MediaTek Kompanio 500">MediaTek Kompanio 500</option>
                </select>
                <select name="ram" id="ram">
                    <option value="">Select RAM</option>
                    <option value="4 GB">4 GB</option>
                    <option value="8 GB">8 GB</option>
                    <option value="16 GB">16 GB</option>
                    <option value="32 GB">32 GB</option>
                </select>
                <select name="storage_capacity" id="storage_capacity">
                    <option value="">Select Storage Capacity</option>
                    <option value="32 GB">32 GB</option>
                    <option value="64 GB">64 GB</option>
                    <option value="128 GB">128 GB</option>
                    <option value="256 GB">256 GB</option>
                    <option value="512 GB">512 GB</option>
                    <option value="1 TB">1 TB</option>
                    <option value="2 TB">2 TB</option>
                </select>
                <select name="storage_type" id="storage_type">
                    <option value="">Select Storage Type</option>
                    <option value="HDD">HDD</option>
                    <option value="SSD">SSD</option>
                    <option value="EMMC">EMMC</option>
                </select>
                <select name="price_min" id="price_min">
                    <option value="">Select Price Min</option>
                    <option value="3000000">Rp. 3.000.000</option>
                    <option value="6000000">Rp. 6.000.000</option>
                    <option value="9000000">Rp. 9.000.000</option>
                    <option value="11000000">Rp. 11.000.000</option>
                    <option value="15000000">Rp. 15.000.000</option>
                </select>
                <select name="price_max" id="price_max">
                    <option value="">Select Price Max</option>
                    <option value="9000000">Rp. 9.000.000</option>
                    <option value="12000000">Rp. 12.000.000</option>
                    <option value="15000000">Rp. 15.000.000</option>
                    <option value="20000000">Rp. 20.000.000</option>
                    <option value="25000000">Rp. 25.000.000</option>
                    <option value="30000000">Rp. 30.000.000</option>
                    <option value="35000000">Rp. 35.000.000</option>
                    <option value="40000000">Rp. 40.000.000</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary btn-block mt-3 btn-submit">Submit</button>
        </form>
        <script>
            // Perlihatkan filter ketika tombol filter diklik
            $('#filterCollapse').on('show.bs.collapse', function () {
                $('.btn-filter').text('Hide Filter');
            });
            // Sembunyikan filter ketika tombol filter diklik kembali
            $('#filterCollapse').on('hide.bs.collapse', function () {
                $('.btn-filter').text('Filter');
            });
        </script>
        <div class="container">
            <h1 class="mt-5">Search Results</h1>
            <div id="searchResults" class="row"></div>
        </div>
    </div>
    <footer class="footer footer-expand-lg">
        <a href="index.html">
            <img src="/Tampilan Web/image/tosiba.png" alt="Tosiba Logo" class="logo" style="width: 150px; height: auto;" />
        </a>
        <p>&copy; 2023 TOSIBA, All Right Reserves</p>
    </footer>
    <button onclick="scrollToTop()" id="backToTopBtn">
        <img src="/Tampilan Web/image/arrow.jpg" alt="Back to Top">
    </button>
</body>
</html>
